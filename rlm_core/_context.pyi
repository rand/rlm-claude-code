from __future__ import annotations

from typing import Any

class Role:
    User: Role
    Assistant: Role
    System: Role
    Tool: Role

class Message:
    role: Role
    content: str
    timestamp: str | None

    def __init__(self, role: Role, content: str, timestamp: str | None = None) -> None: ...
    @staticmethod
    def user(content: str) -> Message: ...
    @staticmethod
    def assistant(content: str) -> Message: ...
    @staticmethod
    def system(content: str) -> Message: ...
    @staticmethod
    def tool(content: str) -> Message: ...

class ToolOutput:
    tool_name: str
    content: str
    exit_code: int | None
    timestamp: str | None

    def __init__(self, tool_name: str, content: str, exit_code: int | None = None) -> None: ...
    def is_success(self) -> bool: ...

class SessionContext:
    def __init__(self) -> None: ...
    def add_message(self, message: Message) -> None: ...
    def add_user_message(self, content: str) -> None: ...
    def add_assistant_message(self, content: str) -> None: ...
    def cache_file(self, path: str, content: str) -> None: ...
    def add_tool_output(self, output: ToolOutput) -> None: ...
    def set_memory(self, key: str, value: Any) -> None: ...
    def get_memory(self, key: str) -> Any: ...
    def messages(self) -> list[Message]: ...
    def last_messages(self, n: int) -> list[Message]: ...
    def files(self) -> dict[str, str]: ...
    def get_file(self, path: str) -> str | None: ...
    def tool_outputs(self) -> list[ToolOutput]: ...
    def message_count(self) -> int: ...
    def file_count(self) -> int: ...
    def spans_multiple_directories(self) -> bool: ...
    def total_message_tokens(self) -> int: ...
